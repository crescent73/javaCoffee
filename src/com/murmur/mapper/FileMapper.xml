<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.murmur.mapper.FileMapper">

    <select id="find" resultType="FileDetail" parameterType="File">
        select *
        from file,teacher
        <where>
        and file.teacher_id = teacher.id
            <if test="id != null">
                and id = #{id}
            </if>
            <if test="fileName != null">
                <if test="fileName != '' ">
                    and filename like #{fileName}
                </if>
            </if>
            <if test="filePath != null">
                and filepath = #{filePath}
            </if>
            <if test="uploadDate != null">
                and upload_date = #{uploadDate}
            </if>
            <if test="courseId != null">
                and course_id = #{courseId}
            </if>
            <if test="uploaderId != null">
                and uploader_id = #{uploaderId}
            </if>
            <if test="fileDescription != null">
                and file_description like #{fileDescription}
            </if>
        </where>
    </select>

    <update id="update" parameterType="File">
        update file
        <set>
            <if test="fileName != null">
                filename = #{fileName},
            </if>
            <if test="filePath != null">
                filepath = #{filePath},
            </if>
            <if test="uploadDate != null">
                upload_date = #{uploadDate},
            </if>
            <if test="courseId != null">
                course_id = #{courseId},
            </if>
            <if test="uploaderId != null">
                course_id = #{courseId},
            </if>
            <if test="fileDescription != null">
                file_description = #{fileDescription},
            </if>
        </set>

        <where>
            <if test="id != null">
                and id = #{id}
            </if>
            <if test="id == null">
                and 1 != 1
            </if>
        </where>

    </update>

    <insert id="insert" parameterType="File">
        insert into file(fiileName, filePath, upload_date, course_id, uploader_id, file_description)
        values(#{name}, #{type}, #{path}, #{uploadDate}, #{courseId}, #{uploaderId}, #{fileDescription})
    </insert>

    <delete id="delete" parameterType="File">
        delete from file
        <where>
            <if test="id != null">
                and id = #{id}
            </if>
            <if test="id == null">
                and 1 != 1
            </if>
        </where>
    </delete>

</mapper>